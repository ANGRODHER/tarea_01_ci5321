<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Triángulo - TWGL</title>
  <style>
    body {
      margin: 0;
      background-color: #1b1e2b;
    }
    canvas {
      display: block;
    }
  </style>
</head>
<body>

<canvas id="c"></canvas>

<script type="module">
  // 1. Importar TWGL
  import * as twgl from "https://cdn.jsdelivr.net/npm/twgl.js@5.5.0/dist/5.x/twgl-full.module.js";

  const canvas = document.getElementById("c");
  const gl = canvas.getContext("webgl2");

  if (!gl) {
    alert("WebGL 2 no soportado");
  }

  // Ajustar tamaño
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
  gl.viewport(0, 0, canvas.width, canvas.height);

  // Fondo
  gl.clearColor(0x1b / 255, 0x1e / 255, 0x2b / 255, 1);
  gl.clear(gl.COLOR_BUFFER_BIT);

  // 2. Shaders
  const vs = `#version 300 es
  in vec2 position;
  in vec3 color;

  out vec3 vColor;

  void main() {
    vColor = color;
    gl_Position = vec4(position, 0.0, 1.0);
  }
  `;

  const fs = `#version 300 es
  precision mediump float;

  in vec3 vColor;
  out vec4 outColor;

  void main() {
    outColor = vec4(vColor, 1.0);
  }
  `;

  // 3. Programa
  const programInfo = twgl.createProgramInfo(gl, [vs, fs]);
  gl.useProgram(programInfo.program);

  // 4. Buffers (datos reales)
  const arrays = {
    position: {
      numComponents: 2,
      data: [
        -0.5, -0.5,
         0.5, -0.5,
         0.0,  0.87
      ],
    },
    color: {
      numComponents: 3,
      data: [
        1, 0, 0,
        0, 1, 0,
        0, 0, 1
      ],
    },
  };

  const bufferInfo = twgl.createBufferInfoFromArrays(gl, arrays);

  // 5. Asociar buffers y dibujar
  twgl.setBuffersAndAttributes(gl, programInfo, bufferInfo);
  twgl.drawBufferInfo(gl, bufferInfo, gl.TRIANGLES);
</script>

</body>
</html>
